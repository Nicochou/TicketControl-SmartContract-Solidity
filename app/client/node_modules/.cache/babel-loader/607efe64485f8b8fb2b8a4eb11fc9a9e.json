{"ast":null,"code":"'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    util = require('util'),\n    eachSeries = require('async/eachSeries'),\n    AsyncEventEmitter;\n\nmodule.exports = exports = AsyncEventEmitter = function AsyncEventEmitter() {\n  EventEmitter.call(this);\n};\n\nutil.inherits(AsyncEventEmitter, EventEmitter);\n/* Public methods\n============================================================================= */\n\nAsyncEventEmitter.prototype.emit = function (event, data, callback) {\n  var self = this,\n      listeners = self._events[event] || []; // Optional data argument\n\n  if (!callback && typeof data === 'function') {\n    callback = data;\n    data = undefined;\n  } // Special treatment of internal newListener and removeListener events\n\n\n  if (event === 'newListener' || event === 'removeListener') {\n    data = {\n      event: data,\n      fn: callback\n    };\n    callback = undefined;\n  } // A single listener is just a function not an array...\n\n\n  listeners = Array.isArray(listeners) ? listeners : [listeners];\n  eachSeries(listeners.slice(), function (fn, next) {\n    var err; // Support synchronous functions\n\n    if (fn.length < 2) {\n      try {\n        fn.call(self, data);\n      } catch (e) {\n        err = e;\n      }\n\n      return next(err);\n    } // Async\n\n\n    fn.call(self, data, next);\n  }, callback);\n  return self;\n};\n\nAsyncEventEmitter.prototype.once = function (type, listener) {\n  var self = this,\n      _g2;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  } // Hack to support set arity\n\n\n  if (listener.length >= 2) {\n    _g2 = function g(e, next) {\n      self.removeListener(type, _g2);\n      listener(e, next);\n    };\n  } else {\n    _g2 = function _g(e) {\n      self.removeListener(type, _g2);\n      listener(e);\n    };\n  }\n\n  _g2.listener = listener;\n  self.on(type, _g2);\n  return self;\n};\n\nAsyncEventEmitter.prototype.first = function (event, listener) {\n  var listeners = this._events[event] || []; // Contract\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  } // Listeners are not always an array\n\n\n  if (!Array.isArray(listeners)) {\n    this._events[event] = listeners = [listeners];\n  }\n\n  listeners.unshift(listener);\n  return this;\n};\n\nAsyncEventEmitter.prototype.at = function (event, index, listener) {\n  var listeners = this._events[event] || []; // Contract\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  }\n\n  if (typeof index !== 'number' || index < 0) {\n    throw new TypeError('index must be a non-negative integer');\n  } // Listeners are not always an array\n\n\n  if (!Array.isArray(listeners)) {\n    this._events[event] = listeners = [listeners];\n  }\n\n  listeners.splice(index, 0, listener);\n  return this;\n};\n\nAsyncEventEmitter.prototype.before = function (event, target, listener) {\n  return this._beforeOrAfter(event, target, listener);\n};\n\nAsyncEventEmitter.prototype.after = function (event, target, listener) {\n  return this._beforeOrAfter(event, target, listener, 'after');\n};\n/* Private methods\n============================================================================= */\n\n\nAsyncEventEmitter.prototype._beforeOrAfter = function (event, target, listener, beforeOrAfter) {\n  var listeners = this._events[event] || [],\n      i,\n      index,\n      add = beforeOrAfter === 'after' ? 1 : 0; // Contract\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  }\n\n  if (typeof target !== 'function') {\n    throw new TypeError('target must be a function');\n  } // Listeners are not always an array\n\n\n  if (!Array.isArray(listeners)) {\n    this._events[event] = listeners = [listeners];\n  }\n\n  index = listeners.length;\n\n  for (i = listeners.length; i--;) {\n    if (listeners[i] === target) {\n      index = i + add;\n      break;\n    }\n  }\n\n  listeners.splice(index, 0, listener);\n  return this;\n};","map":{"version":3,"sources":["D:/Projet/ecole_etna/final-project-feamcor/bileto/client/node_modules/async-eventemitter/lib/AsyncEventEmitter.js"],"names":["EventEmitter","require","util","eachSeries","AsyncEventEmitter","module","exports","call","inherits","prototype","emit","event","data","callback","self","listeners","_events","undefined","fn","Array","isArray","slice","next","err","length","e","once","type","listener","g","TypeError","removeListener","on","first","unshift","at","index","splice","before","target","_beforeOrAfter","after","beforeOrAfter","i","add"],"mappings":"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","sourcesContent":["'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    util = require('util'),\n    eachSeries = require('async/eachSeries'),\n    AsyncEventEmitter;\n\n\nmodule.exports = exports = AsyncEventEmitter = function AsyncEventEmitter () {\n  EventEmitter.call(this);\n};\n\nutil.inherits(AsyncEventEmitter, EventEmitter);\n\n\n/* Public methods\n============================================================================= */\n\nAsyncEventEmitter.prototype.emit = function(event, data, callback) {\n  var self = this,\n      listeners = self._events[event] || [];\n\n  // Optional data argument\n  if(!callback && typeof data === 'function') {\n    callback = data;\n    data = undefined;\n  }\n\n  // Special treatment of internal newListener and removeListener events\n  if(event === 'newListener' || event === 'removeListener') {\n    data = {\n      event: data,\n      fn: callback\n    };\n\n    callback = undefined;\n  }\n\n  // A single listener is just a function not an array...\n  listeners = Array.isArray(listeners) ? listeners : [listeners];\n\n  eachSeries(listeners.slice(), function (fn, next) {\n    var err;\n\n    // Support synchronous functions\n    if(fn.length < 2) {\n      try {\n        fn.call(self, data);\n      }\n      catch (e) {\n        err = e;\n      }\n\n      return next(err);\n    }\n\n    // Async\n    fn.call(self, data, next);\n  }, callback);\n\n  return self;\n};\n\n\nAsyncEventEmitter.prototype.once = function (type, listener) {\n  var self = this,\n      g;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  }\n\n  // Hack to support set arity\n  if(listener.length >= 2) {\n    g = function (e, next) {\n      self.removeListener(type, g);\n      listener(e, next);\n    };\n  }\n  else {\n    g = function (e) {\n      self.removeListener(type, g);\n      listener(e);\n    };\n  }\n\n  g.listener = listener;\n  self.on(type, g);\n\n  return self;\n};\n\n\nAsyncEventEmitter.prototype.first = function(event, listener) {\n  var listeners = this._events[event] || [];\n\n  // Contract\n  if(typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  }\n\n  // Listeners are not always an array\n  if(!Array.isArray(listeners)) {\n    this._events[event] = listeners = [listeners];\n  }\n\n  listeners.unshift(listener);\n\n  return this;\n};\n\n\nAsyncEventEmitter.prototype.at = function(event, index, listener) {\n  var listeners = this._events[event] || [];\n\n  // Contract\n  if(typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  }\n  if(typeof index !== 'number' || index < 0) {\n    throw new TypeError('index must be a non-negative integer');\n  }\n\n  // Listeners are not always an array\n  if(!Array.isArray(listeners)) {\n    this._events[event] = listeners = [listeners];\n  }\n\n  listeners.splice(index, 0, listener);\n\n  return this;\n};\n\n\nAsyncEventEmitter.prototype.before = function(event, target, listener) {\n  return this._beforeOrAfter(event, target, listener);\n};\n\n\nAsyncEventEmitter.prototype.after = function(event, target, listener) {\n  return this._beforeOrAfter(event, target, listener, 'after');\n};\n\n\n/* Private methods\n============================================================================= */\n\nAsyncEventEmitter.prototype._beforeOrAfter = function(event, target, listener, beforeOrAfter) {\n  var listeners = this._events[event] || [],\n      i, index,\n      add = beforeOrAfter === 'after' ? 1 : 0;\n\n  // Contract\n  if(typeof listener !== 'function') {\n    throw new TypeError('listener must be a function');\n  }\n  if(typeof target !== 'function') {\n    throw new TypeError('target must be a function');\n  }\n\n  // Listeners are not always an array\n  if(!Array.isArray(listeners)) {\n    this._events[event] = listeners = [listeners];\n  }\n\n  index = listeners.length;\n  \n  for(i = listeners.length; i--;) {\n    if(listeners[i] === target) {\n      index = i + add;\n      break;\n    }\n  }\n\n  listeners.splice(index, 0, listener);\n\n  return this;\n};\n"]},"metadata":{},"sourceType":"script"}