{"ast":null,"code":"/**\r\n * Implementation of the multicodec specification.\r\n *\r\n * @module multicodec\r\n * @example\r\n * const multicodec = require('multicodec')\r\n *\r\n * const prefixedProtobuf = multicodec.addPrefix('protobuf', protobufBuffer)\r\n * // prefixedProtobuf 0x50...\r\n *\r\n */\n'use strict';\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar varint = require('varint');\n\nvar intTable = require('./int-table');\n\nvar codecNameToCodeVarint = require('./varint-table');\n\nvar util = require('./util');\n\nexports = module.exports;\n/**\r\n * Prefix a buffer with a multicodec-packed.\r\n *\r\n * @param {string|number} multicodecStrOrCode\r\n * @param {Buffer} data\r\n * @returns {Buffer}\r\n */\n\nexports.addPrefix = function (multicodecStrOrCode, data) {\n  var prefix;\n\n  if (Buffer.isBuffer(multicodecStrOrCode)) {\n    prefix = util.varintBufferEncode(multicodecStrOrCode);\n  } else {\n    if (codecNameToCodeVarint[multicodecStrOrCode]) {\n      prefix = codecNameToCodeVarint[multicodecStrOrCode];\n    } else {\n      throw new Error('multicodec not recognized');\n    }\n  }\n\n  return Buffer.concat([prefix, data]);\n};\n/**\r\n * Decapsulate the multicodec-packed prefix from the data.\r\n *\r\n * @param {Buffer} data\r\n * @returns {Buffer}\r\n */\n\n\nexports.rmPrefix = function (data) {\n  varint.decode(data);\n  return data.slice(varint.decode.bytes);\n};\n/**\r\n * Get the codec of the prefixed data.\r\n * @param {Buffer} prefixedData\r\n * @returns {string}\r\n */\n\n\nexports.getCodec = function (prefixedData) {\n  var code = varint.decode(prefixedData);\n  var codecName = intTable.get(code);\n\n  if (codecName === undefined) {\n    throw new Error(\"Code \".concat(code, \" not found\"));\n  }\n\n  return codecName;\n};\n/**\r\n * Get the name of the codec.\r\n * @param {number} codec\r\n * @returns {string}\r\n */\n\n\nexports.getName = function (codec) {\n  return intTable.get(codec);\n};\n/**\r\n * Get the code of the codec\r\n * @param {string} name\r\n * @returns {number}\r\n */\n\n\nexports.getNumber = function (name) {\n  var code = codecNameToCodeVarint[name];\n\n  if (code === undefined) {\n    throw new Error('Codec `' + name + '` not found');\n  }\n\n  return util.varintBufferDecode(code)[0];\n};\n/**\r\n * Get the code of the prefixed data.\r\n * @param {Buffer} prefixedData\r\n * @returns {number}\r\n */\n\n\nexports.getCode = function (prefixedData) {\n  return varint.decode(prefixedData);\n};\n/**\r\n * Get the code as varint of a codec name.\r\n * @param {string} codecName\r\n * @returns {Buffer}\r\n */\n\n\nexports.getCodeVarint = function (codecName) {\n  var code = codecNameToCodeVarint[codecName];\n\n  if (code === undefined) {\n    throw new Error('Codec `' + codecName + '` not found');\n  }\n\n  return code;\n};\n/**\r\n * Get the varint of a code.\r\n * @param {Number} code\r\n * @returns {Array.<number>}\r\n */\n\n\nexports.getVarint = function (code) {\n  return varint.encode(code);\n}; // Make the constants top-level constants\n\n\nvar constants = require('./constants');\n\nObject.assign(exports, constants); // Human friendly names for printing, e.g. in error messages\n\nexports.print = require('./print');","map":{"version":3,"sources":["D:/Projets/group-790626/jobillet/client/node_modules/cids/node_modules/multicodec/src/index.js"],"names":["require","Buffer","varint","intTable","codecNameToCodeVarint","util","exports","module","addPrefix","multicodecStrOrCode","data","prefix","isBuffer","varintBufferEncode","Error","concat","rmPrefix","decode","slice","bytes","getCodec","prefixedData","code","codecName","get","undefined","getName","codec","getNumber","name","varintBufferDecode","getCode","getCodeVarint","getVarint","encode","constants","Object","assign","print"],"mappings":"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","sourcesContent":["/**\r\n * Implementation of the multicodec specification.\r\n *\r\n * @module multicodec\r\n * @example\r\n * const multicodec = require('multicodec')\r\n *\r\n * const prefixedProtobuf = multicodec.addPrefix('protobuf', protobufBuffer)\r\n * // prefixedProtobuf 0x50...\r\n *\r\n */\r\n'use strict'\r\n\r\nconst { Buffer } = require('buffer')\r\nconst varint = require('varint')\r\nconst intTable = require('./int-table')\r\nconst codecNameToCodeVarint = require('./varint-table')\r\nconst util = require('./util')\r\n\r\nexports = module.exports\r\n\r\n/**\r\n * Prefix a buffer with a multicodec-packed.\r\n *\r\n * @param {string|number} multicodecStrOrCode\r\n * @param {Buffer} data\r\n * @returns {Buffer}\r\n */\r\nexports.addPrefix = (multicodecStrOrCode, data) => {\r\n  let prefix\r\n\r\n  if (Buffer.isBuffer(multicodecStrOrCode)) {\r\n    prefix = util.varintBufferEncode(multicodecStrOrCode)\r\n  } else {\r\n    if (codecNameToCodeVarint[multicodecStrOrCode]) {\r\n      prefix = codecNameToCodeVarint[multicodecStrOrCode]\r\n    } else {\r\n      throw new Error('multicodec not recognized')\r\n    }\r\n  }\r\n  return Buffer.concat([prefix, data])\r\n}\r\n\r\n/**\r\n * Decapsulate the multicodec-packed prefix from the data.\r\n *\r\n * @param {Buffer} data\r\n * @returns {Buffer}\r\n */\r\nexports.rmPrefix = (data) => {\r\n  varint.decode(data)\r\n  return data.slice(varint.decode.bytes)\r\n}\r\n\r\n/**\r\n * Get the codec of the prefixed data.\r\n * @param {Buffer} prefixedData\r\n * @returns {string}\r\n */\r\nexports.getCodec = (prefixedData) => {\r\n  const code = varint.decode(prefixedData)\r\n  const codecName = intTable.get(code)\r\n  if (codecName === undefined) {\r\n    throw new Error(`Code ${code} not found`)\r\n  }\r\n  return codecName\r\n}\r\n\r\n/**\r\n * Get the name of the codec.\r\n * @param {number} codec\r\n * @returns {string}\r\n */\r\nexports.getName = (codec) => {\r\n  return intTable.get(codec)\r\n}\r\n\r\n/**\r\n * Get the code of the codec\r\n * @param {string} name\r\n * @returns {number}\r\n */\r\nexports.getNumber = (name) => {\r\n  const code = codecNameToCodeVarint[name]\r\n  if (code === undefined) {\r\n    throw new Error('Codec `' + name + '` not found')\r\n  }\r\n  return util.varintBufferDecode(code)[0]\r\n}\r\n\r\n/**\r\n * Get the code of the prefixed data.\r\n * @param {Buffer} prefixedData\r\n * @returns {number}\r\n */\r\nexports.getCode = (prefixedData) => {\r\n  return varint.decode(prefixedData)\r\n}\r\n\r\n/**\r\n * Get the code as varint of a codec name.\r\n * @param {string} codecName\r\n * @returns {Buffer}\r\n */\r\nexports.getCodeVarint = (codecName) => {\r\n  const code = codecNameToCodeVarint[codecName]\r\n  if (code === undefined) {\r\n    throw new Error('Codec `' + codecName + '` not found')\r\n  }\r\n  return code\r\n}\r\n\r\n/**\r\n * Get the varint of a code.\r\n * @param {Number} code\r\n * @returns {Array.<number>}\r\n */\r\nexports.getVarint = (code) => {\r\n  return varint.encode(code)\r\n}\r\n\r\n// Make the constants top-level constants\r\nconst constants = require('./constants')\r\nObject.assign(exports, constants)\r\n\r\n// Human friendly names for printing, e.g. in error messages\r\nexports.print = require('./print')\r\n"]},"metadata":{},"sourceType":"script"}